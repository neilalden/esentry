import React, {useEffect, useRef, useState} from 'react';
import {SvgXml} from 'react-native-svg';
const Salinity = props => {
  // PROPS
  const height = props.height ?? '15%';
  const width = props.width ?? 50;
  const level = props.level ?? 1;
  const animate = props.animate ?? false;
  const loop = props.loop ?? true;

  // CONSTANTS AND HOOKS
  const ADDER = 0.5;
  const LOOPS = 20;
  const loopCounterRef = useRef(0);
  const loopRef = useRef(false);
  const adderRef = useRef(ADDER);
  const [count, setCount] = useState(0);
  const ANIMATIONSPEED = 50;
  const ANIMATIONLENGTH = 5;

  let fill1Light = 'none';
  let fill1Dark = 'none';
  let fill2Light = 'none';
  let fill2Dark = 'none';
  let fill3Light = 'none';
  let fill3Dark = 'none';

  if (level === 1) {
    fill1Light = '#FFFFFF';
    fill1Dark = '#313235';
  }
  if (level === 2) {
    fill2Light = '#FFFFFF';
    fill2Dark = '#313235';
  }
  if (level === 3) {
    fill3Light = '#FFFFFF';
    fill3Dark = '#313235';
  }
  useEffect(() => {
    if (!animate) return;
    const interval = setInterval(() => {
      setCount(prevCount => prevCount + adderRef.current);
      if (loopRef.current) clearInterval(interval);
    }, ANIMATIONSPEED);
  }, []);

  if (count < 0) {
    adderRef.current = ADDER;
    loopCounterRef.current += 1;
  }
  if (count > ANIMATIONLENGTH) adderRef.current = -ADDER;
  if (loopCounterRef.current == LOOPS && !loop) loopRef.current = true;
  const xml = `
  <svg width="75" height="91" viewBox="0 -1 75 93">
  <mask fill="white">
  <path fill-rule="evenodd" clip-rule="evenodd" d="M63.9076 26.625C63.9439 26.5889 63.9803 26.5528 64.0165 26.5165L37.5 0L10.9835 26.5165C11.0197 26.5528 11.0561 26.5889 11.0924 26.625C4.24228 33.4196 0 42.8394 0 53.25C0 73.9607 16.7893 90.75 37.5 90.75C58.2107 90.75 75 73.9607 75 53.25C75 42.8394 70.7577 33.4196 63.9076 26.625Z"/>
  </mask>
  <path fill-rule="evenodd" clip-rule="evenodd" d="M63.9076 26.625C63.9439 26.5889 63.9803 26.5528 64.0165 26.5165L37.5 0L10.9835 26.5165C11.0197 26.5528 11.0561 26.5889 11.0924 26.625C4.24228 33.4196 0 42.8394 0 53.25C0 73.9607 16.7893 90.75 37.5 90.75C58.2107 90.75 75 73.9607 75 53.25C75 42.8394 70.7577 33.4196 63.9076 26.625Z" fill="#0099FF"/>
  <path d="M64.0165 26.5165L64.7236 27.2236L65.4307 26.5165L64.7236 25.8094L64.0165 26.5165ZM63.9076 26.625L63.2034 25.915L62.4875 26.625L63.2033 27.335L63.9076 26.625ZM37.5 0L38.2071 -0.707107L37.5 -1.41421L36.7929 -0.707107L37.5 0ZM10.9835 26.5165L10.2764 25.8094L9.56929 26.5165L10.2764 27.2236L10.9835 26.5165ZM11.0924 26.625L11.7967 27.335L12.5125 26.625L11.7966 25.915L11.0924 26.625ZM63.3094 25.8094C63.2741 25.8447 63.2388 25.8799 63.2034 25.915L64.6118 27.335C64.6491 27.2979 64.6864 27.2608 64.7236 27.2236L63.3094 25.8094ZM36.7929 0.707107L63.3094 27.2236L64.7236 25.8094L38.2071 -0.707107L36.7929 0.707107ZM11.6906 27.2236L38.2071 0.707107L36.7929 -0.707107L10.2764 25.8094L11.6906 27.2236ZM11.7966 25.915C11.7612 25.8799 11.7259 25.8447 11.6906 25.8094L10.2764 27.2236C10.3136 27.2608 10.3509 27.298 10.3882 27.335L11.7966 25.915ZM1 53.25C1 43.1167 5.12804 33.9495 11.7967 27.335L10.3882 25.915C3.35652 32.8896 -1 42.562 -1 53.25H1ZM37.5 89.75C17.3416 89.75 1 73.4084 1 53.25H-1C-1 74.513 16.237 91.75 37.5 91.75V89.75ZM74 53.25C74 73.4084 57.6584 89.75 37.5 89.75V91.75C58.763 91.75 76 74.513 76 53.25H74ZM63.2033 27.335C69.872 33.9495 74 43.1167 74 53.25H76C76 42.562 71.6435 32.8896 64.6118 25.915L63.2033 27.335Z" fill="black" mask="url(#path-1-inside-1_134_22)"/>
  <g y="${count - 3}">
  <path fill="${fill1Light}" fill-rule="evenodd" clip-rule="evenodd" d="M13.6621 61.1436L12 60.3419V67V69H12.2231C12.9495 72.2398 15.4267 75.2692 19.3223 77.6066C24.0107 80.4196 30.3696 82 37 82C43.6304 82 49.9893 80.4196 54.6777 77.6066C58.5733 75.2692 61.0505 72.2398 61.7769 69H62L62 67L62 65.4726L60.338 66.114C58.6759 66.7553 55.3518 67.8777 52.0277 65.7933C50.1907 64.73 48.3537 62.6384 46.5167 60.5468C45.0296 58.8537 43.5425 57.1605 42.0554 56.0128C38.7313 53.4474 35.2687 53.4474 31.9446 55.3715C30.615 56.2052 29.2853 57.3468 27.9557 58.4884C25.9612 60.2008 23.9668 61.9132 21.9723 62.5866C18.6482 63.8693 15.3241 62.1056 13.6621 61.1436Z" />
  <path fill="${fill1Dark}" fill-rule="evenodd" clip-rule="evenodd" d="M47 63.5C47 64.0523 46.5523 64.5 46 64.5C45.4477 64.5 45 64.0523 45 63.5C45 62.9477 45.4477 62.5 46 62.5C46.5523 62.5 47 62.9477 47 63.5ZM20 67.5C20 68.0523 19.5523 68.5 19 68.5C18.4477 68.5 18 68.0523 18 67.5C18 66.9477 18.4477 66.5 19 66.5C19.5523 66.5 20 66.9477 20 67.5ZM43 74.5C43.5523 74.5 44 74.0523 44 73.5C44 72.9477 43.5523 72.5 43 72.5C42.4477 72.5 42 72.9477 42 73.5C42 74.0523 42.4477 74.5 43 74.5Z" />
  </g>
  <g y="${count - 3}">
  <path fill="${fill2Light}" fill-rule="evenodd" clip-rule="evenodd" d="M8.99446 48.4051L7 47.574V56V56.5491H7.00668C7.16972 63.2459 10.3102 69.6384 15.7868 74.3848C21.4129 79.2607 29.0435 82 37 82C44.9565 82 52.5871 79.2607 58.2132 74.3848C63.6898 69.6384 66.8303 63.2459 66.9933 56.5491H67V56V52.8926L65.0055 53.5574C63.0111 54.2222 59.0222 55.3857 55.0332 53.225C52.8288 52.1228 50.6244 49.9547 48.42 47.7865C46.6355 46.0313 44.851 44.2762 43.0665 43.0865C39.0776 40.4272 34.9224 40.4272 30.9335 42.4217C29.338 43.2859 27.7424 44.4693 26.1468 45.6527C23.7535 47.4278 21.3601 49.2028 18.9668 49.9009C14.9778 51.2305 10.9889 49.4023 8.99446 48.4051Z" />
  <path fill="${fill2Dark}" fill-rule="evenodd" clip-rule="evenodd" d="M35 54.5C35 55.0523 34.5523 55.5 34 55.5C33.4477 55.5 33 55.0523 33 54.5C33 53.9477 33.4477 53.5 34 53.5C34.5523 53.5 35 53.9477 35 54.5ZM62 63.5C62.5523 63.5 63 63.0523 63 62.5C63 61.9477 62.5523 61.5 62 61.5C61.4477 61.5 61 61.9477 61 62.5C61 63.0523 61.4477 63.5 62 63.5ZM18 70.5C18.5523 70.5 19 70.0523 19 69.5C19 68.9477 18.5523 68.5 18 68.5C17.4477 68.5 17 68.9477 17 69.5C17 70.0523 17.4477 70.5 18 70.5ZM46 65.5C46 66.0523 45.5523 66.5 45 66.5C44.4477 66.5 44 66.0523 44 65.5C44 64.9477 44.4477 64.5 45 64.5C45.5523 64.5 46 64.9477 46 65.5ZM42 76.5C42.5523 76.5 43 76.0523 43 75.5C43 74.9477 42.5523 74.5 42 74.5C41.4477 74.5 41 74.9477 41 75.5C41 76.0523 41.4477 76.5 42 76.5ZM14 59.5C14.5523 59.5 15 59.0523 15 58.5C15 57.9477 14.5523 57.5 14 57.5C13.4477 57.5 13 57.9477 13 58.5C13 59.0523 13.4477 59.5 14 59.5Z" />
  </g>
  <g y="${count - 3}">
  <path fill="${fill3Light}"  fill-rule="evenodd" clip-rule="evenodd" d="M56.9856 31.0625L37.5 17L18.0144 31.0625H18.3469C12.0144 36.4732 8 44.5178 8 53.5C8 69.7924 21.2076 83 37.5 83C53.7924 83 67 69.7924 67 53.5C67 44.5178 62.9856 36.4732 56.6531 31.0625H56.9856Z" />
  <path fill="${fill3Dark}" fill-rule="evenodd" clip-rule="evenodd" d="M36 33C36.5523 33 37 32.5523 37 32C37 31.4477 36.5523 31 36 31C35.4477 31 35 31.4477 35 32C35 32.5523 35.4477 33 36 33ZM20 45C20.5523 45 21 44.5523 21 44C21 43.4477 20.5523 43 20 43C19.4477 43 19 43.4477 19 44C19 44.5523 19.4477 45 20 45ZM54 45C54.5523 45 55 44.5523 55 44C55 43.4477 54.5523 43 54 43C53.4477 43 53 43.4477 53 44C53 44.5523 53.4477 45 54 45ZM51 45C51 45.5523 50.5523 46 50 46C49.4477 46 49 45.5523 49 45C49 44.4477 49.4477 44 50 44C50.5523 44 51 44.4477 51 45ZM22 51C22.5523 51 23 50.5523 23 50C23 49.4477 22.5523 49 22 49C21.4477 49 21 49.4477 21 50C21 50.5523 21.4477 51 22 51ZM19 69.5C19 70.0523 18.5523 70.5 18 70.5C17.4477 70.5 17 70.0523 17 69.5C17 68.9477 17.4477 68.5 18 68.5C18.5523 68.5 19 68.9477 19 69.5ZM62 63.5C62.5523 63.5 63 63.0523 63 62.5C63 61.9477 62.5523 61.5 62 61.5C61.4477 61.5 61 61.9477 61 62.5C61 63.0523 61.4477 63.5 62 63.5ZM46 65.5C46 66.0523 45.5523 66.5 45 66.5C44.4477 66.5 44 66.0523 44 65.5C44 64.9477 44.4477 64.5 45 64.5C45.5523 64.5 46 64.9477 46 65.5ZM42 76.5C42.5523 76.5 43 76.0523 43 75.5C43 74.9477 42.5523 74.5 42 74.5C41.4477 74.5 41 74.9477 41 75.5C41 76.0523 41.4477 76.5 42 76.5ZM35 54.5C35 55.0523 34.5523 55.5 34 55.5C33.4477 55.5 33 55.0523 33 54.5C33 53.9477 33.4477 53.5 34 53.5C34.5523 53.5 35 53.9477 35 54.5ZM37 40C37 40.5523 36.5523 41 36 41C35.4477 41 35 40.5523 35 40C35 39.4477 35.4477 39 36 39C36.5523 39 37 39.4477 37 40ZM14 59.5C14.5523 59.5 15 59.0523 15 58.5C15 57.9477 14.5523 57.5 14 57.5C13.4477 57.5 13 57.9477 13 58.5C13 59.0523 13.4477 59.5 14 59.5Z" />
  </g>
  </svg>
    `;

  return <SvgXml xml={xml} width={width} height={height} />;
};

export default React.memo(Salinity);
