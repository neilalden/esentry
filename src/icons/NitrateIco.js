import React, {useEffect, useRef, useState} from 'react';
import {SvgXml} from 'react-native-svg';
const NitrateIco = props => {
  // PROPS
  const height = props.height ?? '15%';
  const width = props.width ?? 50;
  const level = props.level ?? 1;
  const animate = props.animate ?? false;
  const loop = props.loop ?? true;

  // CONSTANTS AND HOOKS
  const ADDER = 1;
  const LOOPS = 20;
  const loopCounterRef = useRef(0);
  const loopRef = useRef(false);
  const adderRef = useRef(ADDER);
  const [count, setCount] = useState(0);
  const ANIMATIONSPEED = 50;
  const ANIMATIONLENGTH = 10;

  const fill1 = level === 1 ? '#000000' : 'none';
  const fill3 = level === 3 ? '#000000' : 'none';
  useEffect(() => {
    if (!animate) return;
    const interval = setInterval(() => {
      setCount(prevCount => prevCount + adderRef.current);
      if (loopRef.current) clearInterval(interval);
    }, ANIMATIONSPEED);
  }, []);

  if (count < 0) {
    adderRef.current = ADDER;
    loopCounterRef.current += 1;
  }
  if (count > ANIMATIONLENGTH) adderRef.current = -ADDER;
  if (loopCounterRef.current == LOOPS && !loop) loopRef.current = true;
  const xml = `
  <svg width="72" height="79" viewBox="-1 -1 72 83">
  <circle cx="35" cy="45" r="15" fill="#FF3399"/>
  <path d="M31.016 50.112C30.8133 50.112 30.6587 50.0587 30.552 49.952C30.4453 49.8347 30.392 49.6693 30.392 49.456V39.28C30.392 39.0667 30.4453 38.9013 30.552 38.784C30.6587 38.6667 30.7973 38.608 30.968 38.608C31.1387 38.608 31.2613 38.64 31.336 38.704C31.4213 38.7573 31.5173 38.8587 31.624 39.008L38.6 48.304H38.216V39.248C38.216 39.0453 38.2693 38.8907 38.376 38.784C38.4827 38.6667 38.6373 38.608 38.84 38.608C39.032 38.608 39.176 38.6667 39.272 38.784C39.3787 38.8907 39.432 39.0453 39.432 39.248V49.472C39.432 49.6747 39.384 49.8347 39.288 49.952C39.2027 50.0587 39.0747 50.112 38.904 50.112C38.744 50.112 38.616 50.08 38.52 50.016C38.424 49.952 38.3227 49.8507 38.216 49.712L31.256 40.416H31.624V49.456C31.624 49.6693 31.5707 49.8347 31.464 49.952C31.3573 50.0587 31.208 50.112 31.016 50.112ZM43.1318 42.672V40.896H41.4038V40.064H43.1318V38.288H43.9638V40.064H45.6918V40.896H43.9638V42.672H43.1318Z" fill="black"/>
  <circle cx="10" cy="69" r="10" fill="#FFFF00"/>
  <path d="M9.596 73.108C8.812 73.108 8.128 72.932 7.544 72.58C6.968 72.22 6.52 71.716 6.2 71.068C5.888 70.42 5.732 69.652 5.732 68.764C5.732 68.092 5.82 67.492 5.996 66.964C6.18 66.428 6.44 65.976 6.776 65.608C7.112 65.232 7.516 64.944 7.988 64.744C8.468 64.536 9.004 64.432 9.596 64.432C10.396 64.432 11.084 64.608 11.66 64.96C12.244 65.312 12.692 65.812 13.004 66.46C13.324 67.1 13.484 67.864 13.484 68.752C13.484 69.424 13.392 70.028 13.208 70.564C13.024 71.1 12.764 71.556 12.428 71.932C12.092 72.308 11.684 72.6 11.204 72.808C10.732 73.008 10.196 73.108 9.596 73.108ZM9.596 72.232C10.204 72.232 10.716 72.096 11.132 71.824C11.556 71.552 11.88 71.156 12.104 70.636C12.328 70.116 12.44 69.492 12.44 68.764C12.44 67.668 12.192 66.82 11.696 66.22C11.208 65.612 10.508 65.308 9.596 65.308C9.004 65.308 8.496 65.444 8.072 65.716C7.656 65.988 7.336 66.384 7.112 66.904C6.888 67.416 6.776 68.036 6.776 68.764C6.776 69.852 7.024 70.704 7.52 71.32C8.016 71.928 8.708 72.232 9.596 72.232ZM14.6192 66.172V65.548H17.8352V66.172H14.6192Z" fill="black"/>
  <circle cx="60" cy="69" r="10" fill="#FFFF00"/>
  <path d="M59.596 73.108C58.812 73.108 58.128 72.932 57.544 72.58C56.968 72.22 56.52 71.716 56.2 71.068C55.888 70.42 55.732 69.652 55.732 68.764C55.732 68.092 55.82 67.492 55.996 66.964C56.18 66.428 56.44 65.976 56.776 65.608C57.112 65.232 57.516 64.944 57.988 64.744C58.468 64.536 59.004 64.432 59.596 64.432C60.396 64.432 61.084 64.608 61.66 64.96C62.244 65.312 62.692 65.812 63.004 66.46C63.324 67.1 63.484 67.864 63.484 68.752C63.484 69.424 63.392 70.028 63.208 70.564C63.024 71.1 62.764 71.556 62.428 71.932C62.092 72.308 61.684 72.6 61.204 72.808C60.732 73.008 60.196 73.108 59.596 73.108ZM59.596 72.232C60.204 72.232 60.716 72.096 61.132 71.824C61.556 71.552 61.88 71.156 62.104 70.636C62.328 70.116 62.44 69.492 62.44 68.764C62.44 67.668 62.192 66.82 61.696 66.22C61.208 65.612 60.508 65.308 59.596 65.308C59.004 65.308 58.496 65.444 58.072 65.716C57.656 65.988 57.336 66.384 57.112 66.904C56.888 67.416 56.776 68.036 56.776 68.764C56.776 69.852 57.024 70.704 57.52 71.32C58.016 71.928 58.708 72.232 59.596 72.232ZM64.6192 66.172V65.548H67.8352V66.172H64.6192Z" fill="black"/>
  <circle cx="35" cy="10" r="10" fill="#FFFF00"/>
  <path d="M34.596 14.108C33.812 14.108 33.128 13.932 32.544 13.58C31.968 13.22 31.52 12.716 31.2 12.068C30.888 11.42 30.732 10.652 30.732 9.764C30.732 9.092 30.82 8.492 30.996 7.964C31.18 7.428 31.44 6.976 31.776 6.608C32.112 6.232 32.516 5.944 32.988 5.744C33.468 5.536 34.004 5.432 34.596 5.432C35.396 5.432 36.084 5.608 36.66 5.96C37.244 6.312 37.692 6.812 38.004 7.46C38.324 8.1 38.484 8.864 38.484 9.752C38.484 10.424 38.392 11.028 38.208 11.564C38.024 12.1 37.764 12.556 37.428 12.932C37.092 13.308 36.684 13.6 36.204 13.808C35.732 14.008 35.196 14.108 34.596 14.108ZM34.596 13.232C35.204 13.232 35.716 13.096 36.132 12.824C36.556 12.552 36.88 12.156 37.104 11.636C37.328 11.116 37.44 10.492 37.44 9.764C37.44 8.668 37.192 7.82 36.696 7.22C36.208 6.612 35.508 6.308 34.596 6.308C34.004 6.308 33.496 6.444 33.072 6.716C32.656 6.988 32.336 7.384 32.112 7.904C31.888 8.416 31.776 9.036 31.776 9.764C31.776 10.852 32.024 11.704 32.52 12.32C33.016 12.928 33.708 13.232 34.596 13.232Z" fill="black"/>
  <line x1="35" y1="30" x2="35" y2="20" stroke="black" stroke-width="2"/>
  <line x1="45.7071" y1="55.2929" x2="52.7782" y2="62.364" stroke="black" stroke-width="2"/>
  <line x1="17.2929" y1="62.3639" x2="24.364" y2="55.2929" stroke="black" stroke-width="2"/>
  <g y="${count}" fill="none">
  <path fill="${fill1}" d="M14.9393 25.0607C15.5251 25.6464 16.4749 25.6464 17.0607 25.0607L26.6066 15.5147C27.1924 14.9289 27.1924 13.9792 26.6066 13.3934C26.0208 12.8076 25.0711 12.8076 24.4853 13.3934L16 21.8787L7.51472 13.3934C6.92893 12.8076 5.97918 12.8076 5.3934 13.3934C4.80761 13.9792 4.80761 14.9289 5.3934 15.5147L14.9393 25.0607ZM17.5 9C17.5 8.17157 16.8284 7.5 16 7.5C15.1716 7.5 14.5 8.17157 14.5 9H17.5ZM17.5 24V9H14.5V24H17.5Z" />
  <path fill="${fill1}" d="M58.9393 43.0607C59.5251 43.6464 60.4749 43.6464 61.0607 43.0607L70.6066 33.5147C71.1924 32.9289 71.1924 31.9792 70.6066 31.3934C70.0208 30.8076 69.0711 30.8076 68.4853 31.3934L60 39.8787L51.5147 31.3934C50.9289 30.8076 49.9792 30.8076 49.3934 31.3934C48.8076 31.9792 48.8076 32.9289 49.3934 33.5147L58.9393 43.0607ZM61.5 22C61.5 21.1716 60.8284 20.5 60 20.5C59.1716 20.5 58.5 21.1716 58.5 22H61.5ZM61.5 42V22H58.5V42H61.5Z" />
  </g>
  <g y="${count}" fill="none">
  <path fill="${fill3}" d="M14.5 24C14.5 24.8284 15.1716 25.5 16 25.5C16.8284 25.5 17.5 24.8284 17.5 24H14.5ZM17.0607 7.93934C16.4749 7.35355 15.5251 7.35355 14.9393 7.93934L5.3934 17.4853C4.80761 18.0711 4.80761 19.0208 5.3934 19.6066C5.97918 20.1924 6.92893 20.1924 7.51472 19.6066L16 11.1213L24.4853 19.6066C25.0711 20.1924 26.0208 20.1924 26.6066 19.6066C27.1924 19.0208 27.1924 18.0711 26.6066 17.4853L17.0607 7.93934ZM17.5 24V9H14.5V24H17.5Z" />
  <path fill="${fill3}" d="M58.5 42C58.5 42.8284 59.1716 43.5 60 43.5C60.8284 43.5 61.5 42.8284 61.5 42H58.5ZM61.0607 20.9393C60.4749 20.3536 59.5251 20.3536 58.9393 20.9393L49.3934 30.4853C48.8076 31.0711 48.8076 32.0208 49.3934 32.6066C49.9792 33.1924 50.9289 33.1924 51.5147 32.6066L60 24.1213L68.4853 32.6066C69.0711 33.1924 70.0208 33.1924 70.6066 32.6066C71.1924 32.0208 71.1924 31.0711 70.6066 30.4853L61.0607 20.9393ZM61.5 42V22H58.5V42H61.5Z" />
  </g>
  </svg>
    `;

  return <SvgXml xml={xml} width={width} height={height} />;
};

export default NitrateIco;
