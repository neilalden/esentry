import React, {useEffect, useRef, useState} from 'react';
import {Dimensions} from 'react-native';
import {SvgXml} from 'react-native-svg';

const Waves = props => {
  // PROPS
  const width = props.width ?? '100%';
  const animate = props.animate ?? false;
  const loop = props.loop ?? false;
  const inverted = props.inverted ?? false;
  // CONSTANTS AND HOOKS
  const ADDER = 2;
  const loopRef = useRef(false);
  const adderRef = useRef(ADDER);
  const [count, setCount] = useState(0);
  const ANIMATIONSPEED = 100;
  const ANIMATIONLENGTH = 1500;
  const WINDOWWIDTH = Dimensions.get('window').width;
  useEffect(() => {
    if (!animate) return;
    const interval = setInterval(() => {
      setCount(prevCount => prevCount + adderRef.current);
      if (loopRef.current) clearInterval(interval);
    }, ANIMATIONSPEED);
  }, []);
  if (count < 0) adderRef.current = ADDER;
  if (count > ANIMATIONLENGTH) adderRef.current = -ADDER;
  if (count >= ANIMATIONLENGTH && !loop) loopRef.current = true;

  const xml = `
    <svg width="8681" height="50" viewBox="1500 0 ${
      inverted ? WINDOWWIDTH * 2 : WINDOWWIDTH * 2.5
    } 50">
        <g transform="translate(${-Math.abs(count)},0)">
        <path id="wave3" d="M361 0L384.2 4C407.8 8 454.2 16 501 15.5C547.8 15 594.2 5.99999 641 5.29999C687.8 4.69999 734.2 12.3 780.2 14.7C826.2 17 871.8 14 917.8 13C963.8 12 1010.2 13 1057 11C1103.8 9 1150.2 4 1197 5.5C1243.8 7 1290.2 15 1337 20.3C1383.8 25.7 1430.2 28.3 1477 29.2C1523.8 30 1570.2 29 1616.2 24.2C1662.2 19.3 1707.8 10.7 1753.8 11.5C1799.8 12.3 1846.2 22.7 1893 23.2C1939.8 23.7 1986.2 14.3 2033 13.2C2079.8 12 2126.2 19 2173 20C2219.8 21 2266.2 16 2313 12.8C2359.8 9.69999 2406.2 8.3 2452.2 8.5C2498.2 8.7 2543.8 10.3 2589.8 13.7C2635.8 17 2682.2 22 2729 22.2C2775.8 22.3 2822.2 17.7 2869 16.3C2915.8 15 2962.2 17 3009 14.5C3055.8 12 3102.2 4.99999 3149 7.29999C3195.8 9.69999 3242.2 21.3 3288.2 21.5C3334.2 21.7 3379.8 10.3 3425.8 6.29999C3471.8 2.29999 3518.2 5.69999 3565 8.29999C3611.8 11 3658.2 13 3705 17C3751.8 21 3798.2 27 3845 28.7C3891.8 30.3 3938.2 27.7 3985 25.5C4031.8 23.3 4078.2 21.7 4124.2 17.3C4170.2 13 4215.8 6.00001 4261.8 7.70001C4307.8 9.30001 4354.2 19.7 4401 19.3C4447.8 19 4494.2 8 4541 8.5C4587.8 9 4634.2 21 4657.8 27L4681 33V83H4657.8C4634.2 83 4587.8 83 4541 83C4494.2 83 4447.8 83 4401 83C4354.2 83 4307.8 83 4261.8 83C4215.8 83 4170.2 83 4124.2 83C4078.2 83 4031.8 83 3985 83C3938.2 83 3891.8 83 3845 83C3798.2 83 3751.8 83 3705 83C3658.2 83 3611.8 83 3565 83C3518.2 83 3471.8 83 3425.8 83C3379.8 83 3334.2 83 3288.2 83C3242.2 83 3195.8 83 3149 83C3102.2 83 3055.8 83 3009 83C2962.2 83 2915.8 83 2869 83C2822.2 83 2775.8 83 2729 83C2682.2 83 2635.8 83 2589.8 83C2543.8 83 2498.2 83 2452.2 83C2406.2 83 2359.8 83 2313 83C2266.2 83 2219.8 83 2173 83C2126.2 83 2079.8 83 2033 83C1986.2 83 1939.8 83 1893 83C1846.2 83 1799.8 83 1753.8 83C1707.8 83 1662.2 83 1616.2 83C1570.2 83 1523.8 83 1477 83C1430.2 83 1383.8 83 1337 83C1290.2 83 1243.8 83 1197 83C1150.2 83 1103.8 83 1057 83C1010.2 83 963.8 83 917.8 83C871.8 83 826.2 83 780.2 83C734.2 83 687.8 83 641 83C594.2 83 547.8 83 501 83C454.2 83 407.8 83 384.2 83H361V0Z" fill="#9CD7FE" fill-opacity="0.75"/>
        </g>
        <g transform="translate(${Math.abs(count)},0)">
        <path id="wave2" d="M0 21.1196L23.2 19.3196C46.8 17.4196 93.2 13.8196 140 13.1196C186.8 12.4196 233.2 14.8196 280 19.6196C326.8 24.4196 373.2 31.8196 419.2 31.3196C465.2 30.8196 510.8 22.4196 556.8 19.8196C602.8 17.1196 649.2 20.1196 696 23.9196C742.8 27.8196 789.2 32.4196 836 33.3196C882.8 34.1196 929.2 31.1196 976 30.8196C1022.8 30.4196 1069.2 32.8196 1116 35.4196C1162.8 38.1196 1209.2 41.1196 1255.2 38.1196C1301.2 35.1196 1346.8 26.1196 1392.8 22.3196C1438.8 18.4196 1485.2 19.8196 1532 19.1196C1578.8 18.4196 1625.2 15.8196 1672 18.9196C1718.8 22.1196 1765.2 31.1196 1812 36.3196C1858.8 41.4196 1905.2 42.8196 1952 39.1196C1998.8 35.4196 2045.2 26.8196 2091.2 21.6196C2137.2 16.4196 2182.8 14.8196 2228.8 17.1196C2274.8 19.4196 2321.2 25.8196 2368 27.6196C2414.8 29.4196 2461.2 26.8196 2508 28.3196C2554.8 29.8196 2601.2 35.4196 2648 33.3196C2694.8 31.1196 2741.2 21.1196 2788 18.8196C2834.8 16.4196 2881.2 21.8196 2927.2 26.9196C2973.2 32.1196 3018.8 37.1196 3064.8 37.4196C3110.8 37.8196 3157.2 33.4196 3204 33.8196C3250.8 34.1196 3297.2 39.1196 3344 36.1196C3390.8 33.1196 3437.2 22.1196 3484 22.4196C3530.8 22.8196 3577.2 34.4196 3624 38.4196C3670.8 42.4196 3717.2 38.8196 3763.2 38.6196C3809.2 38.4196 3854.8 41.8196 3900.8 42.3196C3946.8 42.8196 3993.2 40.4196 4040 38.8196C4086.8 37.1196 4133.2 36.1196 4180 32.1196C4226.8 28.1196 4273.2 21.1196 4296.8 17.6196L4320 14.1196V99.1196H4296.8C4273.2 99.1196 4226.8 99.1196 4180 99.1196C4133.2 99.1196 4086.8 99.1196 4040 99.1196C3993.2 99.1196 3946.8 99.1196 3900.8 99.1196C3854.8 99.1196 3809.2 99.1196 3763.2 99.1196C3717.2 99.1196 3670.8 99.1196 3624 99.1196C3577.2 99.1196 3530.8 99.1196 3484 99.1196C3437.2 99.1196 3390.8 99.1196 3344 99.1196C3297.2 99.1196 3250.8 99.1196 3204 99.1196C3157.2 99.1196 3110.8 99.1196 3064.8 99.1196C3018.8 99.1196 2973.2 99.1196 2927.2 99.1196C2881.2 99.1196 2834.8 99.1196 2788 99.1196C2741.2 99.1196 2694.8 99.1196 2648 99.1196C2601.2 99.1196 2554.8 99.1196 2508 99.1196C2461.2 99.1196 2414.8 99.1196 2368 99.1196C2321.2 99.1196 2274.8 99.1196 2228.8 99.1196C2182.8 99.1196 2137.2 99.1196 2091.2 99.1196C2045.2 99.1196 1998.8 99.1196 1952 99.1196C1905.2 99.1196 1858.8 99.1196 1812 99.1196C1765.2 99.1196 1718.8 99.1196 1672 99.1196C1625.2 99.1196 1578.8 99.1196 1532 99.1196C1485.2 99.1196 1438.8 99.1196 1392.8 99.1196C1346.8 99.1196 1301.2 99.1196 1255.2 99.1196C1209.2 99.1196 1162.8 99.1196 1116 99.1196C1069.2 99.1196 1022.8 99.1196 976 99.1196C929.2 99.1196 882.8 99.1196 836 99.1196C789.2 99.1196 742.8 99.1196 696 99.1196C649.2 99.1196 602.8 99.1196 556.8 99.1196C510.8 99.1196 465.2 99.1196 419.2 99.1196C373.2 99.1196 326.8 99.1196 280 99.1196C233.2 99.1196 186.8 99.1196 140 99.1196C93.2 99.1196 46.8 99.1196 23.2 99.1196H0V21.1196Z" fill="#6DC3FD" fill-opacity="0.8"/>
        </g>
        <g transform="translate(${-Math.abs(count)},0)">
        <path id="wave1" d="M361 25.6217L384.2 27.3217C407.8 28.9217 454.2 32.3217 501 35.3217C547.8 38.3217 594.2 40.9217 641 42.6217C687.8 44.3217 734.2 44.9217 780.2 45.4217C826.2 45.9217 871.8 46.3217 917.8 43.1217C963.8 39.9217 1010.2 33.3217 1057 33.4217C1103.8 33.6217 1150.2 40.6217 1197 43.3217C1243.8 45.9217 1290.2 44.3217 1337 41.8217C1383.8 39.3217 1430.2 35.9217 1477 33.6217C1523.8 31.3217 1570.2 29.9217 1616.2 30.3217C1662.2 30.6217 1707.8 32.6217 1753.8 30.1217C1799.8 27.6217 1846.2 20.6217 1893 22.4217C1939.8 24.3217 1986.2 34.9217 2033 38.6217C2079.8 42.3217 2126.2 38.9217 2173 34.6217C2219.8 30.3217 2266.2 24.9217 2313 27.3217C2359.8 29.6217 2406.2 39.6217 2452.2 42.3217C2498.2 44.9217 2543.8 40.3217 2589.8 34.6217C2635.8 28.9217 2682.2 22.3217 2729 23.1217C2775.8 23.9217 2822.2 32.3217 2869 37.4217C2915.8 42.6217 2962.2 44.6217 3009 44.4217C3055.8 44.3217 3102.2 41.9217 3149 42.6217C3195.8 43.3217 3242.2 46.9217 3288.2 44.8217C3334.2 42.6217 3379.8 34.6217 3425.8 29.1217C3471.8 23.6217 3518.2 20.6217 3565 22.6217C3611.8 24.6217 3658.2 31.6217 3705 32.4217C3751.8 33.3217 3798.2 27.9217 3845 25.8217C3891.8 23.6217 3938.2 24.6217 3985 26.9217C4031.8 29.3217 4078.2 32.9217 4124.2 33.3217C4170.2 33.6217 4215.8 30.6217 4261.8 32.4217C4307.8 34.3217 4354.2 40.9217 4401 40.1217C4447.8 39.3217 4494.2 30.9217 4541 28.9217C4587.8 26.9217 4634.2 31.3217 4657.8 33.4217L4681 35.6217V102.622H4657.8C4634.2 102.622 4587.8 102.622 4541 102.622C4494.2 102.622 4447.8 102.622 4401 102.622C4354.2 102.622 4307.8 102.622 4261.8 102.622C4215.8 102.622 4170.2 102.622 4124.2 102.622C4078.2 102.622 4031.8 102.622 3985 102.622C3938.2 102.622 3891.8 102.622 3845 102.622C3798.2 102.622 3751.8 102.622 3705 102.622C3658.2 102.622 3611.8 102.622 3565 102.622C3518.2 102.622 3471.8 102.622 3425.8 102.622C3379.8 102.622 3334.2 102.622 3288.2 102.622C3242.2 102.622 3195.8 102.622 3149 102.622C3102.2 102.622 3055.8 102.622 3009 102.622C2962.2 102.622 2915.8 102.622 2869 102.622C2822.2 102.622 2775.8 102.622 2729 102.622C2682.2 102.622 2635.8 102.622 2589.8 102.622C2543.8 102.622 2498.2 102.622 2452.2 102.622C2406.2 102.622 2359.8 102.622 2313 102.622C2266.2 102.622 2219.8 102.622 2173 102.622C2126.2 102.622 2079.8 102.622 2033 102.622C1986.2 102.622 1939.8 102.622 1893 102.622C1846.2 102.622 1799.8 102.622 1753.8 102.622C1707.8 102.622 1662.2 102.622 1616.2 102.622C1570.2 102.622 1523.8 102.622 1477 102.622C1430.2 102.622 1383.8 102.622 1337 102.622C1290.2 102.622 1243.8 102.622 1197 102.622C1150.2 102.622 1103.8 102.622 1057 102.622C1010.2 102.622 963.8 102.622 917.8 102.622C871.8 102.622 826.2 102.622 780.2 102.622C734.2 102.622 687.8 102.622 641 102.622C594.2 102.622 547.8 102.622 501 102.622C454.2 102.622 407.8 102.622 384.2 102.622H361V25.6217Z" fill="#0099FF"/>
        </g>
    </svg>
      `;

  return (
    <SvgXml
      xml={xml}
      width={width}
      style={
        inverted && {
          transform: [{rotate: '180deg'}],
        }
      }
    />
  );
};

export default React.memo(Waves);
