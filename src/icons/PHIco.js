import React, {useEffect, useRef, useState} from 'react';
import {SvgXml} from 'react-native-svg';
const PHIco = props => {
  // PROPS
  const height = props.height ?? '15%';
  const width = props.width ?? 50;
  const level = props.level ?? 1;
  const animate = props.animate ?? false;
  const loop = props.loop ?? true;

  // CONSTANTS AND HOOKS
  const ADDER = 1;
  const LOOPS = 20;
  const loopCounterRef = useRef(0);
  const loopRef = useRef(false);
  const adderRef = useRef(ADDER);
  const [count, setCount] = useState(0);
  const ANIMATIONSPEED = 50;
  const ANIMATIONLENGTH = 10;

  const fill1 = level === 1 ? '#000000' : 'none';
  const fill3 = level === 3 ? '#000000' : 'none';
  useEffect(() => {
    if (!animate) return;
    const interval = setInterval(() => {
      setCount(prevCount => prevCount + adderRef.current);
      if (loopRef.current) clearInterval(interval);
    }, ANIMATIONSPEED);
  }, []);

  if (count < 0) {
    adderRef.current = ADDER;
    loopCounterRef.current += 1;
  }
  if (count > ANIMATIONLENGTH) adderRef.current = -ADDER;
  if (loopCounterRef.current == LOOPS && !loop) loopRef.current = true;
  const xml = `
  <svg width="80" height="96" viewBox="-1 -1 80 100">
    <path fill-rule="evenodd" clip-rule="evenodd" d="M63.9076 31.625C63.9439 31.5889 63.9803 31.5528 64.0165 31.5165L37.5 5L10.9835 31.5165C11.0197 31.5528 11.0561 31.5889 11.0924 31.625C4.24228 38.4196 0 47.8394 0 58.25C0 78.9607 16.7893 95.75 37.5 95.75C58.2107 95.75 75 78.9607 75 58.25C75 47.8394 70.7577 38.4196 63.9076 31.625Z"/>
    <path fill-rule="evenodd" clip-rule="evenodd" d="M63.9076 31.625C63.9439 31.5889 63.9803 31.5528 64.0165 31.5165L37.5 5L10.9835 31.5165C11.0197 31.5528 11.0561 31.5889 11.0924 31.625C4.24228 38.4196 0 47.8394 0 58.25C0 78.9607 16.7893 95.75 37.5 95.75C58.2107 95.75 75 78.9607 75 58.25C75 47.8394 70.7577 38.4196 63.9076 31.625Z" fill="#FFFF00"/>
    <path d="M64.0165 31.5165L64.7236 32.2236L65.4307 31.5165L64.7236 30.8094L64.0165 31.5165ZM63.9076 31.625L63.2034 30.915L62.4875 31.625L63.2033 32.335L63.9076 31.625ZM37.5 5L38.2071 4.29289L37.5 3.58579L36.7929 4.29289L37.5 5ZM10.9835 31.5165L10.2764 30.8094L9.56929 31.5165L10.2764 32.2236L10.9835 31.5165ZM11.0924 31.625L11.7967 32.335L12.5125 31.625L11.7966 30.915L11.0924 31.625ZM63.3094 30.8094C63.2741 30.8447 63.2388 30.8799 63.2034 30.915L64.6118 32.335C64.6491 32.2979 64.6864 32.2608 64.7236 32.2236L63.3094 30.8094ZM36.7929 5.70711L63.3094 32.2236L64.7236 30.8094L38.2071 4.29289L36.7929 5.70711ZM11.6906 32.2236L38.2071 5.70711L36.7929 4.29289L10.2764 30.8094L11.6906 32.2236ZM11.7966 30.915C11.7612 30.8799 11.7259 30.8447 11.6906 30.8094L10.2764 32.2236C10.3136 32.2608 10.3509 32.298 10.3882 32.335L11.7966 30.915ZM1 58.25C1 48.1167 5.12804 38.9495 11.7967 32.335L10.3882 30.915C3.35652 37.8896 -1 47.562 -1 58.25H1ZM37.5 94.75C17.3416 94.75 1 78.4084 1 58.25H-1C-1 79.513 16.237 96.75 37.5 96.75V94.75ZM74 58.25C74 78.4084 57.6584 94.75 37.5 94.75V96.75C58.763 96.75 76 79.513 76 58.25H74ZM63.2033 32.335C69.872 38.9495 74 48.1167 74 58.25H76C76 47.562 71.6435 37.8896 64.6118 30.915L63.2033 32.335Z" fill="black"/>
    <path d="M23.832 80.988C23.496 80.988 23.232 80.892 23.04 80.7C22.848 80.508 22.752 80.236 22.752 79.884V65.748C22.752 65.38 22.848 65.108 23.04 64.932C23.232 64.74 23.496 64.644 23.832 64.644C24.184 64.644 24.448 64.74 24.624 64.932C24.816 65.108 24.912 65.38 24.912 65.748V67.932L24.648 67.5C24.904 66.62 25.408 65.916 26.16 65.388C26.912 64.86 27.816 64.596 28.872 64.596C29.912 64.596 30.816 64.844 31.584 65.34C32.352 65.82 32.952 66.516 33.384 67.428C33.816 68.324 34.032 69.396 34.032 70.644C34.032 71.876 33.816 72.956 33.384 73.884C32.968 74.796 32.368 75.5 31.584 75.996C30.816 76.476 29.912 76.716 28.872 76.716C27.832 76.716 26.936 76.452 26.184 75.924C25.432 75.396 24.928 74.7 24.672 73.836H24.936V79.884C24.936 80.236 24.84 80.508 24.648 80.7C24.456 80.892 24.184 80.988 23.832 80.988ZM28.368 74.988C29.056 74.988 29.656 74.82 30.168 74.484C30.696 74.148 31.104 73.66 31.392 73.02C31.68 72.38 31.824 71.588 31.824 70.644C31.824 69.236 31.512 68.164 30.888 67.428C30.264 66.692 29.424 66.324 28.368 66.324C27.664 66.324 27.048 66.492 26.52 66.828C26.008 67.148 25.608 67.628 25.32 68.268C25.048 68.908 24.912 69.7 24.912 70.644C24.912 72.052 25.224 73.132 25.848 73.884C26.472 74.62 27.312 74.988 28.368 74.988ZM38.2299 76.668C37.8779 76.668 37.6059 76.572 37.4139 76.38C37.2219 76.172 37.1259 75.884 37.1259 75.516V60.564C37.1259 60.18 37.2219 59.892 37.4139 59.7C37.6059 59.508 37.8779 59.412 38.2299 59.412C38.5979 59.412 38.8779 59.508 39.0699 59.7C39.2619 59.892 39.3579 60.18 39.3579 60.564V66.972H49.1499V60.564C49.1499 60.18 49.2459 59.892 49.4379 59.7C49.6299 59.508 49.9099 59.412 50.2779 59.412C50.6299 59.412 50.9019 59.508 51.0939 59.7C51.2859 59.892 51.3819 60.18 51.3819 60.564V75.516C51.3819 75.884 51.2859 76.172 51.0939 76.38C50.9019 76.572 50.6299 76.668 50.2779 76.668C49.9099 76.668 49.6299 76.572 49.4379 76.38C49.2459 76.172 49.1499 75.884 49.1499 75.516V68.868H39.3579V75.516C39.3579 75.884 39.2619 76.172 39.0699 76.38C38.8939 76.572 38.6139 76.668 38.2299 76.668Z" fill="black"/>
    <g y="${count - 2}">
    <path fill="${fill1}" d="M66.9393 32.0607C67.5251 32.6464 68.4749 32.6464 69.0607 32.0607L78.6066 22.5147C79.1924 21.9289 79.1924 20.9792 78.6066 20.3934C78.0208 19.8076 77.0711 19.8076 76.4853 20.3934L68 28.8787L59.5147 20.3934C58.9289 19.8076 57.9792 19.8076 57.3934 20.3934C56.8076 20.9792 56.8076 21.9289 57.3934 22.5147L66.9393 32.0607ZM69.5 16C69.5 15.1716 68.8284 14.5 68 14.5C67.1716 14.5 66.5 15.1716 66.5 16H69.5ZM69.5 31V16H66.5V31H69.5Z"/>
    <path fill="${fill1}" d="M13.9393 23.0607C14.5251 23.6464 15.4749 23.6464 16.0607 23.0607L25.6066 13.5147C26.1924 12.9289 26.1924 11.9792 25.6066 11.3934C25.0208 10.8076 24.0711 10.8076 23.4853 11.3934L15 19.8787L6.51472 11.3934C5.92893 10.8076 4.97918 10.8076 4.3934 11.3934C3.80761 11.9792 3.80761 12.9289 4.3934 13.5147L13.9393 23.0607ZM16.5 2C16.5 1.17157 15.8284 0.5 15 0.5C14.1716 0.5 13.5 1.17157 13.5 2H16.5ZM16.5 22V2H13.5L13.5 22H16.5Z"/>
    </g>
    <g y="${count}" fill="none">
    <path fill="${fill3}" d="M66.5 31C66.5 31.8284 67.1716 32.5 68 32.5C68.8284 32.5 69.5 31.8284 69.5 31H66.5ZM69.0607 14.9393C68.4749 14.3536 67.5251 14.3536 66.9393 14.9393L57.3934 24.4853C56.8076 25.0711 56.8076 26.0208 57.3934 26.6066C57.9792 27.1924 58.9289 27.1924 59.5147 26.6066L68 18.1213L76.4853 26.6066C77.0711 27.1924 78.0208 27.1924 78.6066 26.6066C79.1924 26.0208 79.1924 25.0711 78.6066 24.4853L69.0607 14.9393ZM69.5 31V16H66.5V31H69.5Z"/>
    <path fill="${fill3}" d="M13.5 22C13.5 22.8284 14.1716 23.5 15 23.5C15.8284 23.5 16.5 22.8284 16.5 22H13.5ZM16.0607 0.93934C15.4749 0.353553 14.5251 0.353553 13.9393 0.93934L4.3934 10.4853C3.80761 11.0711 3.80761 12.0208 4.3934 12.6066C4.97918 13.1924 5.92893 13.1924 6.51472 12.6066L15 4.12132L23.4853 12.6066C24.0711 13.1924 25.0208 13.1924 25.6066 12.6066C26.1924 12.0208 26.1924 11.0711 25.6066 10.4853L16.0607 0.93934ZM16.5 22V2H13.5L13.5 22H16.5Z"/>
    </g>
    </svg>
    `;

  return <SvgXml xml={xml} width={width} height={height} />;
};

export default PHIco;
